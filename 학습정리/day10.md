# ⚡️ 한입 Next 강의 정리

## 열 번째 날

### 리액트 서버컴포넌트
- 기존 NEXT에서는 하이드레이션을 위해 불필요한 JS Bundle이 포함되어 있어서 사전랜더링이 길어질 수 있음. 상호작용이 필요하지 않은 정적인 페이지는 서버에서만 실행되도록 작업하게끔 하는것.
- 서버측에서 사전랜더링할 때 딱 한번만 실행
- 클라이언트 컴포넌트 : 상호작용을 위한 하이드레이션을 위해 총 2번 실행 됌
- 페이지의 대부분을 서버컴포넌트로 구성할것을 권장. 클라이언트 컴포넌트는 꼭 필요한 경우에만...
- 서버컴포넌트는 따로 만들어줄 수 없음. 페이지라우터가 기본설정이 SSG인것 처럼 앱라우터는 모든 페이지의 기본은 서버컴포넌트임.
- 서버, 클라이언트 컴포넌트 구분은 브라우저(자바스크립트, 리액트 훅)와 상호작용이 존재하냐 안하냐로 구분하면 됌

### 컴포넌트별 주의사항
- 서버 컴포넌트
  - 브라우저에서 실행되는 코드가 포함하면 안됌
  - 클라이언트 컴포넌트로 직렬화 되지 않는 Props는 전달 불가
    - 직렬화 : serialization으로 간단한 데이터로 만드는걸 말함
    - 함수는 직렬화가 불가능함
    - 서버컴포넌트는 실행할때 따로 RSC Payload가 먼저 실행 됌.
      - RSC Payload는 순수한 데이터 결과물. 직렬화 한 결과로서 서버컴포넌트의 랜더링 결과, 연결된 클라이언트 컴포넌트 위치, 클라이언트 컴포넌트에 전달하는 props값이 포함됌
- 클라이언트 컴포넌트
  - 클라이언트에서만 실행되지 않는다
    - 하이드레이션을 위해서 클라이언트에서 한번 더 실행될뿐 사전랜더링을 위해 이미 서버에서 사전에 한번 실행됌 
  - 서버컴포넌트를 import 할 수 없음 (반대는 가능)
    - 다만 next에서 클라 -> 서버로 import 할 경우 next가 하위 서버 컴포넌트를 자동으로 client로 변경해줌.
    - 그래서 부모가 클라이언트 컴포넌트면 상단에 'use client' 선언안해줘도 됌
    - **다만 이렇게 의도한것이 아니라면 서버컴포넌트로 사용되어야할 컴포넌트면 이렇게 쓰지 말것.**
    - 부득이하게 클라이언트 컴포넌트에서 서버컴포넌트를 자식으로 두어야 할 경우, 클라이언트 컴포넌트에서 자식을 children으로 넘겨주도록 하고, 전체 클라이언트 컴포넌트를 호출하는 컴포넌트에서 props로 서버컴포넌트를 넘겨주면 변환도 안되고 땡임.
      - ```javascript
          <클라이언트 컴포넌트> 
            <서버컴포넌트/>
          </클라이언트 컴포넌트>
- 

---
### 느낀점
- 서버컴포넌트과 클라이언트 컴포넌트 구분사항에 대해서 확실하게 알 수 있었다. 클라이언트 컴포넌트에서 서버컴포넌트로 내려주는 방법이 가능한게 정말 놀라웠음 불가능인줄 알았는데....
